# danime-ListPlus

## Abstarct
dアニメストアで全く活用されてない割に、微妙にスペースを割かれている「マイリスト」機能があります。
この拡張機能により、そのマイリスト機能を効率よく利用できるようになります。

拡張機能のキャッシュに保存される非公式マイリスト (キャッシュリスト) を利用できます。
エクスポート・インポート機能により、マイリストを外部と共有できます。

## Usage

### Select Works To Add MyList

デフォルトではマイリストに作品を追加する際、複数選択を利用できません。~~なんでやねん~~
1. **複数選択機能は、「続きから見る」や「視聴履歴」など「編集する」が表示されている画面から利用できます**。
   「編集する」をクリックし、マイリストに追加したい作品を選択します。
2. 下部に表示されている「マイリストに追加」ボタンをクリックすると、マイリスト一覧が表示されます。
3. そこで追加したいマイリストを選択し「マイリストに追加する」をクリックすることで追加できます。
    ~~現時点では、マイリストの作品数が50件を上回らないように操作する必要があります。~~
    公式マイリストに、作品数が50件を上回るような操作を施した場合、自動的にマイリストが追加され、上限を超えた作品はそちらに追加されます。
    また、「新しくマイリストを作成する」からマイリストを追加することもできます。


### Copy / Combine MyLists

デフォルトのマイリストの操作は、複数追加だけでなくコピー・合成もできません。
1. マイリストの一覧が表示されている画面で「編集する」を押すことでマイリスト操作機能を利用できます。
   「編集する」をクリックし、コピー・合成したいマイリストを選択します。
   その後、下部の「コピー/合成」ボタンをクリックします。
2. 1つだけ選択されていれば、そのマイリストをコピーします。
    2つ以上選択されていれば、それらのマイリストに含まれている作品を**重複を除いて足し合わせ、50個毎に複数のマイリストに**分割されます。
    その際、マイリストの名前は「<1つ目のマイリスト名>@@<適当な英数字6桁>」で統一されます。

### Cache List

公式のマイリストは最大20件しか作成できず、50作品ずつしか登録できません。~~さすがに少なすぎます~~

キャッシュリスト(非公式マイリスト)は拡張機能内に保存されるリストなので、そのような制約は一切ありません。
- 「マイリストに追加」のメニューから「新しくマイリストを作成する」を選んだ際、prefix(デフォルトでは`cache_`)を付けた名前でマイリストを作成することで、新しくキャッシュリストを作成できます。
- 公式のマイリストやキャッシュリストを選択して「合成 (Cache)」を押すことでも、キャッシュリストは作成できます。
- 作成されたキャッシュリストは、マイリスト一覧の画面に(デフォルトでは)若草色背景のボックスとして表示されます。
- マイリスト一覧からキャッシュリストを選択し、「削除 (Cache)」を押すことで削除することができます。

### Import / Export

公式マイリスト・キャッシュリストを`json`などの形式でインポート・エクスポートすることができます。
- マイリスト一覧から「その他」を押して、その他メニューDialogを開くことで、インポート・エクスポートが可能です。
- `json / csv / tsv`からフォーマットを選択してエクスポートボタンを押すことで、ファイルをダウンロードすることができます。
    - 複数のリストを選択すれば、それらの内容を含んだファイルをダウンロードできます。
- 本拡張機能からダウンロードされた`json/csv/tsv`ファイル、または同様のフォーマットのファイルを読み込むことでインポートすることができます。
    - インポート先は「新しいキャッシュリスト / 新しい公式マイリスト / 既存の指定したマイリスト」から選択できます。
    - `json`ファイルの場合、元のマイリストの名前を引き継ぐことができます。
    - 複数のリストをエクスポートしたファイルの場合、(インポート先が「既存の指定したマイリスト」でないなら)新しく複数のリストが作成されます。

## Future Work

- 複数作品選択機能から50個以上になるようにマイリストに作品を追加した場合も、エラーを出さずにマイリストを適当に分割してくれる。
    - done
- マイリストをキャッシュとして保存・読み出しができる。
    - done
- キャッシュされたマイリストをそのまま表示できる。
    - done

## Caution

本拡張機能はまだ動作が不安定です。
ご了承ください。
## License

MIT

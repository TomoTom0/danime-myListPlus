# danime-ListPlus

## Abstarct
dアニメストアの作品を自在に管理しましょう！ (Chrome Storeへはこれから申請)

素晴らしいアニメ動画配信サイトのdアニメストアでは、非常にたくさんの作品が配信されていますが、
それらを分類・管理する方法は実はほとんどありません。
具体的には以下の2つです。本拡張機能は「マイリスト」機能を大幅に強化し、手軽に気軽に作品を管理分類できるようにします。

| | 分類 |　保存作品数 | 備考 |
|-|-|-| - |
| 気になるリスト| なし | 500 作品 | 気になるリスト登録数は作品人気の指標になる。<br> スマホからの操作は簡単。 |
| マイリスト | 最大20件 | 50 作品 / 1 リスト | マイリスト名は10文字以内。<br> 登録などの操作は煩雑。 ~~運営からも見放されている。~~ |
| キャッシュリスト | **無制限** | **無制限** | 基本的に制約はなし。スマホなどからは利用できないが、**マイリストと相互変換可能**。 |

- キャッシュリスト (拡張機能のキャッシュに保存される疑似マイリスト) は保存作品数・リスト数・名前文字数、すべて制限なく利用できます。
- マイリスト・キャッシュリスト・気になるリストへの作品の登録・削除の際に、**複数選択**することができます。マイリストの保存作品数が50を超える場合、自動的に新しいリストが作成されます。
- 複数のリストを合成して、マイリスト・キャッシュリストを作成することができます。その際に重複は自動的に排除されます。マイリストの保存作品数が50を超える場合、自動的に新しいリストが作成されます。
- `json / csv / tsv`形式での**インポート・エクスポートをサポート**します。
- 作品ボックスの背景色で各種リストへの登録状況を把握できます。
- 「続きから見る」などのページで、1ページに表示する作品数を変更できます。
- マイリスト・キャッシュリストの並び順を変更できます。キャッシュリスト内の作品も並び替えも可能です。

詳しい使い方はHackMDのDocuments(作成中)をご覧ください。

## Feature

### Select Works To Add MyList

デフォルトではマイリストに作品を追加する際、複数選択を利用できません。~~なんでやねん~~
1. **複数選択機能は、「続きから見る」や「視聴履歴」など「編集する」が表示されている画面から利用できます**。
   「編集する」をクリックし、マイリストに追加したい作品を選択します。
2. 下部に表示されている「マイリストに追加」ボタンをクリックすると、マイリスト一覧が表示されます。
3. そこで追加したいマイリストを選択し「マイリストに追加する」をクリックすることで追加できます。
    公式マイリストに、作品数が50件を上回るような操作を施した場合、自動的にマイリストが追加され、上限を超えた作品はそちらに追加されます。
    また、「新しくマイリストを作成する」からマイリストを追加することもできます。

### Copy / Combine MyLists

デフォルトのマイリストの操作は、複数追加だけでなくコピー・合成もできません。
1. マイリストの一覧が表示されている画面で「編集する」を押すことでマイリスト操作機能を利用できます。
   「編集する」をクリックし、コピー・合成したいマイリストを選択します。
   その後、下部の「コピー/合成」ボタンをクリックします。
2. 1つだけ選択されていれば、そのマイリストをコピーします。
    2つ以上選択されていれば、それらのマイリストに含まれている作品を**重複を除いて足し合わせ、50個毎に複数のマイリストに**分割されます。
    その際、マイリストの名前は「<1つ目のマイリスト名>@@<適当な数字2桁>」で統一されます。

### Cache List

公式のマイリストは最大20件しか作成できず、50作品ずつしか登録できません。~~さすがに少なすぎます~~

キャッシュリスト(非公式マイリスト)は拡張機能内に保存されるリストなので、そのような制約は一切ありません。
- 「マイリストに追加」のメニューから「新しくマイリストを作成する」を選んだ際、prefix(デフォルトでは`cache_`)を付けた名前でマイリストを作成することで、新しくキャッシュリストを作成できます。
- 公式のマイリストやキャッシュリストを選択して「合成 (Cache)」を押すことでも、キャッシュリストは作成できます。
- 作成されたキャッシュリストは、マイリスト一覧の画面に(デフォルトでは)若草色背景のボックスとして表示されます。
- マイリスト一覧からリストを選択し、「削除」を押すことで削除することができます。

### Import / Export

公式マイリスト・キャッシュリストを`json`などの形式でインポート・エクスポートすることができます。
- マイリスト一覧から「その他」を押して、その他メニューDialogを開くことで、インポート・エクスポートが可能です。
- `json / csv / tsv`からフォーマットを選択してエクスポートボタンを押すことで、ファイルをダウンロードすることができます。
    - 複数のリストを選択すれば、それらの内容を含んだファイルをダウンロードできます。
- 本拡張機能からダウンロードされた`json / csv / tsv`ファイル、または同様のフォーマットのファイルを読み込むことでインポートすることができます。
    - インポート先は「新しいキャッシュリスト / 新しい公式マイリスト / 既存の指定したリスト」から選択できます。
    - `json`ファイルの場合、元のマイリストの名前を引き継ぐことができます。
    - 複数のリストをエクスポートしたファイルの場合、(インポート先が「既存の指定したリスト」でないなら)新しく複数のリストが作成されます。

## Future Work

- option pageを作成する。
- 各操作終了後に確認dialogを表示させる。

## Caution

本拡張機能はまだ動作が不安定です。
ご了承ください。

## License

MIT
